<%- include('../components/head') %>
<div id="layout">
	<%#
	<!-- Menu -->
	%> <%- include('../components/menu') %> <%#
	<!-- Main container -->
	%>
	<div id="main">
		<%# Page header %>
		<div class="header">
			<h1><%= titles.title %></h1>
			<h2><%= titles.subTitle %></h2>
		</div>

		<%# Page content %>
		<div class="content">
			<p>This basic administration page allows you to :</p>
			<ul>
				<li>Create, update and delete a page or a post.</li>
				<li>Modify the settings' configuration of the app.</li>
			</ul>

			<span id="files" hidden><%= JSON.stringify(files) %></span>
			<form id="file-form" class="pure-form pure-form-stacked" action="/admin" method="post">
				<fieldset>
					<legend>CREATE, UPDATE, DELETE</legend>

					<div class="pure-g">
						<div class="pure-u-1-3">
							<label for="action-select">Action type</label>
							<select name="actionType" id="action-select" required>
								<option value="">What do you want to do ?</option>
								<option value="create">Create</option>
								<option value="update">Update</option>
								<option value="delete">Delete</option>
							</select>
						</div>

						<div class="pure-u-1-3">
							<label for="file-type-select">File type</label>
							<select name="fileType" id="file-type-select" required>
								<option value="">Please choose a file type</option>
								<option value="page">Page</option>
								<option value="post">Post</option>
								<!-- <option value="template">Template</option> -->
							</select>
						</div>

						<div id="file-title-select-div" class="pure-u-1-3 hidden">
							<label for="file-title-select">File title</label>
							<select name="fileTitle" id="file-title-select">
								<option value="">Please select file to modify</option>
							</select>
						</div>

						<%# TOAST UI EDITOR %>
						<div id="editor" style="margin: 0.25em 0"></div>

						<%# Hidden textarea to get the content from the above editor %>
						<div class="pure-u-1" hidden>
							<textarea name="fileContents" id="file-contents" rows="10" class="pure-input-1"></textarea>
						</div>
					</div>

					<button id="submit-button" type="button" class="pure-button pure-button-primary">Submit</button>
				</fieldset>
			</form>

			<hr />

			<p>
				⚠️ PLEASE BE EXTREMELY CAREFUL ! ⚠️
				<br />
				⚠️ THIS CAN BREAK YOUR APPLICATION ! ⚠️
				<br />
				The content of the following textarea will be parsed to JSON !
				<br />
				You should copy the whole content of this textarea and paste it in a JSON validator before submitting !
				<br />
				You can use any online JSON validator or one of the following :
			</p>
			<ul>
				<li><a href="https://jsonlint.com/">JSONLint - The JSON Validator</a></li>
				<li><a href="https://jsononline.net/json-validator">JSON Online Validator</a></li>
				<li><a href="https://jsonformatter.curiousconcept.com/">JSON Formatter & Validator</a></li>
				<li><a href="https://jsonchecker.com/">JSON Checker</a></li>
			</ul>

			<form id="config-form" class="pure-form pure-form-stacked" action="/admin-config" method="post">
				<fieldset>
					<legend>MODIFY THE CONFIGURATION</legend>

					<div class="pure-g">
						<div class="pure-u-1">
							<textarea name="settings" id="settings-contents" rows="15" class="pure-input-1">
<%= settings %></textarea
							>
						</div>
					</div>

					<button id="submit-config-button" type="button" class="pure-button pure-button-primary">Submit</button>
				</fieldset>
			</form>
		</div>
	</div>
</div>
<%- include('../components/footer') %>
